<q-card dark>
  <q-card-section>
    <div class="text-h6">{{project.id?'Edit':'Create'}} Project</div>
  </q-card-section>

  <q-separator />

  <q-card-section style="max-height: 50vh" class="scroll">
    <q-form
      @reset="onReset"
      class="createProjectForm q-pa-sm col-xs-12 row"
      dark
    >
      <div class=" col-xs-12 col-md-8 col-lg-9 q-pa-md project--inputs">
        <div class="row">
          <div
            v-for="(input,index) in inputs"
            :key="`project-${index}`"
            :class="`col-xs-12 col-md-${input==='link'?'12':'6'} q-pa-md`"
          >
            <q-input
              :key="`project-input-${index}`"
              dark
              filled
              v-model="project[input]"
              :label="input"
              :hint="`Add ${input}`"
              lazy-rules
              :rules="[ val => val && val.length > 0 || `Please add ${input}`]"
            >
              <template v-slot:append v-if="input === 'name'">
                <!-- <q-avatar square>
                    <q-img
                      v-if="project.logoPath"
                      :src="`${imageLink}/projects/image/${project.logoPath}`"
                      spinner-color="white"
                      style="max-width: 40px"
                    />
                  </q-avatar> -->
              </template>
            </q-input>
          </div>
          <!-- <div
              class=" col-xs-12 col-md-6 col-lg-6 q-pa-md"
              v-for="(colorPick,index) in colorPicks"
              :key="`colorPick-${index}`"
            >
              <q-input
                dark
                filled
                v-model="project[colorPick]"
                class="my-input"
                :hint=" `pick a ${colorPick}`"
              >
                <template v-slot:append>
                  <q-icon name="colorize" class="cursor-pointer">
                    <q-popup-proxy
                      transition-show="scale"
                      transition-hide="scale"
                    >
                      <q-color
                        no-header
                        default-value="#c0c0c0"
                        format-model="hex"
                        @change="val => { project[colorPick] = val }"
                        :value="project[colorPick]"
                      />
                    </q-popup-proxy>
                  </q-icon>
                </template>
              </q-input>
            </div> -->
          <div class=" col-xs-12 col-md-6 col-lg-12 q-pa-md">
            <q-select
              dark
              filled
              v-model="project.tags"
              use-chips
              :options="tags"
              label="Multi with toggle"
              multiple
              map-options
              emit-value
            >
              <template v-slot:selected-item="scope">
                <q-chip
                  removable
                  dense
                  @remove="scope.removeAtIndex(scope.index)"
                  :tabindex="scope.tabindex"
                  color="white"
                  text-color="green"
                >
                  {{ scope.opt.name }}
                </q-chip>
              </template>
              <template v-slot:option="scope">
                <q-item v-bind="scope.itemProps" v-on="scope.itemEvents">
                  <q-item-section >
                    <q-item-label v-html="scope.opt.name"></q-item-label>
                  </q-item-section>
                  <q-item-section side>
                    <q-toggle v-model="project.tags" :val="scope.opt" />
                  </q-item-section>
                </q-item>
              </template>
            </q-select>
          </div>
          {{project.tags}}
          <div class=" col-xs-12 col-md-6 col-lg-12 q-pa-md">
            <q-editor
              dark
              v-model="project.description"
              min-height="5rem"
              class="bg-transparent"
            />
          </div>
        </div>
      </div>
      <div class=" col-xs-12 col-md-4 col-lg-3 q-pa-md project--image">
        <div class="row" style="height: 100%;">
          <div class=" col-xs-12 col-md-12 col-lg-12 q-pt-md q-pb-md">
            <q-uploader
              dark
              label="Filtered (png only)"
              :filter="checkFileType"
              style="max-width: 100%; overflow: hidden;height: 100%;background: #565656;max-height: 100%;"
              @add="(e) => checkFile(e)"
              color="red"
            >
              <template v-slot:header="scope">
                <div
                  :style="{background:project.backgroundColor !== '#fff'?project.backgroundColor:'red'}"
                  class="row no-wrap items-center q-pa-sm q-gutter-xs"
                >
                  <q-btn
                    v-if="scope.queuedFiles.length > 0"
                    icon="clear_all"
                    @click="scope.removeQueuedFiles"
                    round
                    dense
                    flat
                  >
                    <q-tooltip>Clear All</q-tooltip>
                  </q-btn>
                  <q-btn
                    v-if="scope.uploadedFiles.length > 0"
                    icon="done_all"
                    @click="scope.removeUploadedFiles"
                    round
                    dense
                    flat
                  >
                    <q-tooltip>Remove Uploaded Files</q-tooltip>
                  </q-btn>
                  <div class="col">
                    <div class="q-uploader__title">Upload your files</div>
                    <div class="q-uploader__subtitle">
                      {{ scope.uploadSizeLabel }} / {{ scope.uploadProgressLabel
                      }}
                    </div>
                  </div>
                  <q-btn
                    v-if="scope.canAddFiles"
                    type="a"
                    icon="add_box"
                    round
                    dense
                    flat
                  >
                    <q-uploader-add-trigger />
                    <q-tooltip>Pick Files</q-tooltip>
                  </q-btn>
                  <q-btn
                    v-show="false"
                    v-if="scope.canUpload"
                    icon="cloud_upload"
                    @click="scope.upload"
                    round
                    dense
                    flat
                  >
                    <q-tooltip>Upload Files</q-tooltip>
                  </q-btn>

                  <q-btn
                    v-if="scope.isUploading"
                    icon="clear"
                    @click="scope.abort"
                    round
                    dense
                    flat
                  >
                    <q-tooltip>Abort Upload</q-tooltip>
                  </q-btn>
                </div>
              </template>
            </q-uploader>
          </div>
        </div>
      </div>
    </q-form>
  </q-card-section>

  <q-separator />

  <q-card-actions align="right">
    <q-btn
      label="Submit"
      type="submit"
      color="green"
      @click="saveProject()"
      :loading="isCreatingProject"
      :percenprojecte="loadingPercentage"
      :disabled="!canSaveProject"
    />
    <q-btn label="Reset" type="reset" color="green" flat class="q-ml-sm" />
    <!-- <q-btn flat label="Decline" color="primary" v-close-popup />
      <q-btn flat label="Accept" color="primary" v-close-popup /> -->
  </q-card-actions>
</q-card>
<!-- <div>
    <div class="full-width row justify-center q-pa-md">
    </div>
  </div> -->
